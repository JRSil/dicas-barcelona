var Merlin=function(r){var i={save_logo:function(e){new n(e).init(e)},install_child:function(e){(new ChildTheme).init(e)},activate_license:function(e){(new ActivateLicense).init(e)},install_plugins:function(e){(new PluginManager).init(e)},install_content:function(e){(new ContentManager).init(e)}};function e(){var t=r(".merlin__body"),e=(r(".merlin__body--loading"),r(".merlin__body--exiting"),r("#merlin__drawer-trigger"));drawer_opened="merlin__drawer--open",setTimeout(function(){t.addClass("loaded")},100),e.on("click",function(){t.toggleClass(drawer_opened)}),r(".merlin__button--proceed:not(.merlin__button--closer)").click(function(e){e.preventDefault();var n=this.getAttribute("href");t.addClass("exiting"),setTimeout(function(){window.location=n},400)}),r(".merlin__button--closer").on("click",function(e){t.removeClass(drawer_opened),e.preventDefault();var n=this.getAttribute("href");setTimeout(function(){t.addClass("exiting")},600),setTimeout(function(){window.location=n},1100)}),r(".button-next").on("click",function(e){if(e.preventDefault(),!function(e){var n=jQuery(e);if("yes"==n.data("done-loading"))return!1;n.is("input")||n.is("button");return n.data("done-loading","yes"),n.addClass("merlin__button--loading"),{done:function(){!0,n.attr("disabled",!1)}}}(this))return!1;var n=r(this).data("callback");return!n||void 0===i[n]||(i[n](this),!1)})}function n(){var n,i=r(".merlin__body"),t=r("#child-theme-text");function a(e){void 0!==e.done?(setTimeout(function(){t.addClass("lead")},0),setTimeout(function(){t.addClass("success"),t.html(e.message)},600),n()):(t.addClass("lead error"),t.html(e.error))}return{init:function(e){var t;n=function(){setTimeout(function(){r(".merlin__body").addClass("js--finished")},1500),i.removeClass(drawer_opened),setTimeout(function(){r(".merlin__body").addClass("exiting")},3500),setTimeout(function(){window.location.href=e.href},4e3)},t={action:"ampforwp_save_installer",wpnonce:ampforwp_install_params.wpnonce},jQuery("ul.merlin__drawer--import-content").find("input, select").each(function(e,n){switch(jQuery(this).attr("type")){case"text":case"hidden":t[jQuery(this).attr("name")]=jQuery(this).val();break;case"checkbox":1==jQuery(this).prop("checked")?t[jQuery(this).attr("name")]=1:t[jQuery(this).attr("name")]=0;break;default:t[jQuery(this).attr("name")]=jQuery(this).val()}}),jQuery.post(ampforwp_install_params.ajaxurl,t,a).fail(a)}}}return{init:function(){this,r(e)},callback:function(e){console.log(e),console.log(this)}}}(jQuery);Merlin.init(),jQuery(document).ready(function(n){0<n(".set_custom_images").length&&"undefined"!=typeof wp&&wp.media&&wp.media.editor&&n(document).on("click",".set_custom_images",function(e){e.preventDefault();var i=n(this),a=i.parents("li").find("#process_custom_images");return wp.media.editor.send.attachment=function(e,n){var t={url:n.url,id:n.id,height:n.height,width:n.width,thumbnail:n.sizes.thumbnail.url};a.val(JSON.stringify(t)),i.parents("li").find("img").remove(),i.parents("li").append("<br><br><img src='"+n.url+"' width='100' height='100'>")},wp.media.editor.open(i),!1}),n("#ampforwp-design-select").change(function(){var e=n(this).val();n(this).parents("li").find("#design-"+e).siblings("img").hide(),n(this).parents("li").find("#design-"+e).fadeIn()})});