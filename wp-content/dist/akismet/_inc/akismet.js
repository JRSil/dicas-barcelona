jQuery(function(i){var o=null,n=null,s=null,t='a[id^="author_comment_url"], tr.pingback td.column-author a:first-of-type, td.comment p a';i(".akismet-status").each(function(){var t=i(this).attr("commentid");i(this).prependTo("#comment-"+t+" .column-comment")}),i(".akismet-user-comment-count").each(function(){var t=i(this).attr("commentid");i(this).insertAfter("#comment-"+t+" .author strong:first").show()}),c(),i("#the-comment-list").on("click",".akismet_remove_url",function(){var e=i(this).attr("commentid"),t={action:"comment_author_deurl",_wpnonce:WPAkismet.comment_author_url_nonce,id:e};return i.ajax({url:ajaxurl,type:"POST",data:t,beforeSend:function(){i("a[commentid='"+e+"']").hide(),i("#author_comment_url_"+e).html(i("<span/>").text(WPAkismet.strings["Removing..."]))},success:function(t){t&&i("#author_comment_url_"+e).attr("cid",e).addClass("akismet_undo_link_removal").html(i("<span/>").text(WPAkismet.strings["URL removed"])).append(" ").append(i("<span/>").text(WPAkismet.strings["(undo)"]).addClass("akismet-span-link"))}}),!1}).on("click",".akismet_undo_link_removal",function(){var e=i(this).attr("cid"),a=i(this).attr("href"),t={action:"comment_author_reurl",_wpnonce:WPAkismet.comment_author_url_nonce,id:e,url:a};return i.ajax({url:ajaxurl,type:"POST",data:t,beforeSend:function(){i("#author_comment_url_"+e).html(i("<span/>").text(WPAkismet.strings["Re-adding..."]))},success:function(t){t&&(i("a[commentid='"+e+"']").show(),i("#author_comment_url_"+e).removeClass("akismet_undo_link_removal").text(a.replace(/^http:\/\/(www\.)?/gi,"")))}}),!1}),i("#the-comment-list").on("mouseover",t,function(){if(clearTimeout(o),0<i(".akismet-mshot").length){if(i(".akismet-mshot:first").data("link")==this)return;i(".akismet-mshot").remove()}clearTimeout(n),clearTimeout(s);var t=i(this).attr("href"),e=i('<div class="akismet-mshot mshot-container"><div class="mshot-arrow"></div><img src="'+u(t)+'" width="450" height="338" class="mshot-image" /></div>');e.data("link",this);var a=i(this).offset();e.offset({left:Math.min(i(window).width()-475,a.left+i(this).width()+10),top:a.top+i(this).height()/2-101}),n=setTimeout(function(){e.find(".mshot-image").attr("src",u(t,2))},6e3),s=setTimeout(function(){e.find(".mshot-image").attr("src",u(t,3))},12e3),i("body").append(e)}).on("mouseout",'a[id^="author_comment_url"], tr.pingback td.column-author a:first-of-type, td.comment p a',function(){o=setTimeout(function(){clearTimeout(n),clearTimeout(s),i(".akismet-mshot").remove()},200)}).on("mouseover","tr",function(){i(this).find(t).each(function(){var t;i(this).data("akismet-mshot-preloaded")||(t=i(this).attr("href"),(new Image).src=u(t),i(this).data("akismet-mshot-preloaded",!0))})}),i(".checkforspam:not(.button-disabled)").click(function(t){t.preventDefault(),i(".checkforspam:not(.button-disabled)").addClass("button-disabled"),i(".checkforspam-spinner").addClass("spinner").addClass("is-active"),i(".checkforspam .akismet-label").text(i(".checkforspam").data("active-label")),function e(a,o){var n=i(".checkforspam");var t=Math.round(m/n.data("pending-comment-count")*1e3)/10;i(".checkforspam-progress").text(n.data("progress-label-format").replace("%1$s",t));i.post(ajaxurl,{action:"akismet_recheck_queue",offset:a,limit:o},function(t){m+=t.counts.processed,r+=t.counts.spam,t.counts.processed<o?window.location.href=n.data("success-url").replace("__recheck_count__",m).replace("__spam_count__",r):e(a+o-t.counts.spam,o)})}(0,100)});var r=0,m=0;if("start_recheck"in WPAkismet&&WPAkismet.start_recheck&&i(".checkforspam").click(),"undefined"!=typeof MutationObserver){var e=document.getElementById("the-comment-list");if(e)new MutationObserver(function(t){for(var e=0,a=t.length;e<a;e++)if(0<t[e].addedNodes.length){c();break}}).observe(e,{attributes:!0,childList:!0,characterData:!0})}function c(){i("#the-comment-list").find('tr.comment, tr[id ^= "comment-"]').find('.column-author a[href^="http"]:first').each(function(){if(!(0<i(this).parent().find(".akismet_remove_url").length)){var t=i(this).attr("href"),e=document.location.href.split("/"),a=e[0]+"//"+e[2]+"/";if(0!=t.indexOf(a)){var o=i(this).parents("tr:first").attr("id").split("-");i(this).attr("id","author_comment_url_"+o[1]).after(i('<a href="#" class="akismet_remove_url">x</a>').attr("commentid",o[1]).attr("title",WPAkismet.strings["Remove this URL"]))}}})}function u(t,e){var a="//s0.wordpress.com/mshots/v1/"+encodeURIComponent(t)+"?w=900";return e&&(a+="&r="+encodeURIComponent(e)),a}});