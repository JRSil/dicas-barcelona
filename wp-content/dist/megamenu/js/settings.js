jQuery(function(i){"use strict";if("0px"==i("input.mega-setting-responsive_breakpoint").val()&&i(".mega-tab-content-mobile_menu").addClass("mega-mobile-disabled"),i("input.mega-setting-responsive_breakpoint").on("keyup",function(){"0px"==i(this).val()?i(".mega-tab-content-mobile_menu").addClass("mega-mobile-disabled"):i(".mega-tab-content-mobile_menu").removeClass("mega-mobile-disabled")}),i('input[name="settings[disable_mobile_toggle]"]').is(":checked")&&i(".mega-tab-content-mobile_menu").addClass("mega-toggle-disabled"),i('input[name="settings[disable_mobile_toggle]"]').on("change",function(){i(this).is(":checked")?i(".mega-tab-content-mobile_menu").addClass("mega-toggle-disabled"):i(".mega-tab-content-mobile_menu").removeClass("mega-toggle-disabled")}),i("#codemirror").length)CodeMirror.fromTextArea(document.getElementById("codemirror"),{tabMode:"indent",lineNumbers:!0,lineWrapping:!0,viewportMargin:1/0,onChange:function(e){e.save()}});i('[data-tab="mega-tab-content-custom_styling"]').on("click",function(){setTimeout(function(){i(".mega-tab-content-custom_styling").find(".CodeMirror").each(function(e,t){t.CodeMirror.refresh()})},160)}),i(".mm_colorpicker").spectrum({preferredFormat:"rgb",showInput:!0,showAlpha:!0,clickoutFiresChange:!0,showSelectionPalette:!0,showPalette:!0,palette:[],localStorageKey:"maxmegamenu.themeeditor",change:function(e){0===e.getAlpha()?i(this).siblings("div.chosen-color").html("transparent"):i(this).siblings("div.chosen-color").html(e.toRgbString())}}),i(".mega-copy_color span").on("click",function(){var e=i(this).parent().parent().children(":first").find("input"),t=i(this).parent().parent().children(":last").find("input");i(t).spectrum("set",e.val()),t.siblings("div.chosen-color").html(e.siblings("div.chosen-color").html())}),i(".confirm").on("click",function(){return confirm(megamenu_settings.confirm)}),i("#theme_selector").on("change",function(){var e=i(this).val();return e&&(window.location=e),!1}),i(".mega-location-header").on("click",function(e){"a"!=e.target.nodeName.toLowerCase()&&(i(this).parent().toggleClass("mega-closed").toggleClass("mega-open"),i(this).siblings(".mega-inner").slideToggle())}),i(".icon_dropdown").select2({containerCssClass:"tpx-select2-container select2-container-sm",dropdownCssClass:"tpx-select2-drop",minimumResultsForSearch:-1,formatResult:function(e){return'<i class="'+i(e.element).attr("data-class")+'"></i>'},formatSelection:function(e){return'<i class="'+i(e.element).attr("data-class")+'"></i>'}}),i(".mega-tab-content").each(function(){i(this).hasClass("mega-tab-content-general")||i(this).hide()}),i(".mega-tab").on("click",function(){var e=i(this);e.siblings().removeClass("nav-tab-active"),e.addClass("nav-tab-active");var t=i(this).attr("data-tab");i(".mega-tab-content").hide(),i("."+t).show()}),i(".theme_editor").on("submit",function(e){e.preventDefault(),i(".theme_result_message").remove(),i(".spinner").css("visibility","visible").css("display","block"),i("input#submit").attr("disabled","disabled");var n=i("<a>").attr("href",megamenu_settings.increase_memory_limit_url).html(megamenu_settings.increase_memory_limit_anchor_text);i.ajax({url:ajaxurl,async:!0,data:i(this).serialize(),type:"POST",success:function(e){if(1==e.success){var t=i("<p>").addClass("saved theme_result_message"),s=i("<span>").addClass("dashicons dashicons-yes");i(".megamenu_submit .mega_left").append(t.html(s).append(e.data))}else if(0==e.success){var a=i("<p>").addClass("fail theme_result_message").html(megamenu_settings.theme_save_error+" ").append(megamenu_settings.theme_save_error_refresh).append("<br /><br />").append(e.data);i(".megamenu_submit").after(a)}else{if(0<=e.indexOf("exhausted"))a=i("<p>").addClass("fail theme_result_message").html(megamenu_settings.theme_save_error+" ").append(megamenu_settings.theme_save_error_exhausted+" ").append(megamenu_settings.theme_save_error_memory_limit+" ").append(n).append("<br />").append(e);else a=i("<p>").addClass("fail theme_result_message").html(megamenu_settings.theme_save_error+"<br />").append(e);i(".megamenu_submit").after(a)}},error:function(e){if(500==e.status)var t=i("<p>").addClass("fail theme_result_message").html(megamenu_settings.theme_save_error_500+" ").append(megamenu_settings.theme_save_error_memory_limit+" ").append(n);else if("-1"==e.responseText)t=i("<p>").addClass("fail theme_result_message").html(megamenu_settings.theme_save_error+" "+megamenu_settings.theme_save_error_nonce_failed);i(".megamenu_submit").after(t)},complete:function(){i(".spinner").hide(),i("input#submit").removeAttr("disabled")}})}),i(".theme_editor").on("change",function(e){i(".theme_result_message").css("visibility","hidden")}),i("select#mega_css").on("change",function(){var e=i(this),t=i(this).val();e.next().children().hide(),e.next().children("."+t).show()}),i(window).scroll(function(){i(".theme_editor input:focus").blur()}),i("form.theme_editor label[data-validation]").each(function(){var t=i(this),s=t.attr("data-validation"),a=t.siblings(".mega-validation-message-"+t.attr("class"));i("input",t).on("blur",function(){var e=i(this).val();if(t.hasClass("mega-flyout_width")&&"auto"==e)return t.removeClass("mega-error"),void t.siblings(".mega-validation-message-"+t.attr("class")).hide();"int"==s&&Math.floor(e)!=e||"px"==s&&"px"!=e.substr(e.length-2)&&"em"!=e.substr(e.length-2)&&"vh"!=e.substr(e.length-2)&&"vw"!=e.substr(e.length-2)&&"pt"!=e.substr(e.length-2)&&"rem"!=e.substr(e.length-3)&&"%"!=e.substr(e.length-1)&&0!=e||"float"==s&&!i.isNumeric(e)?(t.addClass("mega-error"),a.show()):(t.removeClass("mega-error"),t.siblings(".mega-validation-message-"+t.attr("class")).hide())})})});