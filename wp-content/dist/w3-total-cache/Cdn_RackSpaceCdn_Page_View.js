jQuery(function(n){function e(c){c.options.height=jQuery(".w3tc_cdn_rackspace_form").height()+30,c.resize()}function t(c){e(c),_()}function _(){var c=jQuery('input[name="service_id"]').val(),t=jQuery('input[name="access_token"]').val(),a=jQuery('input[name="access_region_descriptor"]').val();jQuery.post(ajaxurl,{action:"w3tc_ajax",_wpnonce:w3tc_nonce,service_id:c,access_token:t,access_region_descriptor:a,w3tc_action:"cdn_rackspace_service_get_state"},function(c){var t;c&&c.status&&(status=c.status),jQuery(".w3tc_rackspace_created_status").html(status),"deployed"==status?(t=c,jQuery(".w3tc_rackspace_cname").html(t.cname),jQuery(".w3tc_rackspace_access_url").html(t.access_url),jQuery(".w3tc_rackspace_created_in_progress").css("display","none"),jQuery(".w3tc_rackspace_created_done").css("display",""),e(W3tc_Lightbox)):setTimeout(_,5e3)},"json").fail(function(){jQuery(".w3tc_rackspace_created_state").html("Failed to obtain state"),setTimeout(_,5e3)})}n("body").on("click",".w3tc_cdn_rackspace_authorize",function(){W3tc_Lightbox.open({id:"w3tc-overlay",close:"",width:800,height:300,url:ajaxurl+"?action=w3tc_ajax&_wpnonce="+w3tc_nonce+"&w3tc_action=cdn_rackspace_intro",callback:e})}).on("click",".w3tc_popup_submit",function(){var c=ajaxurl+"?action=w3tc_ajax&_wpnonce="+w3tc_nonce;W3tc_Lightbox.load_form(c,".w3tc_cdn_rackspace_form",e)}).on("click",".w3tc_cdn_rackspace_service_create_done",function(){var c=ajaxurl+"?action=w3tc_ajax&_wpnonce="+w3tc_nonce+"&w3tc_action=cdn_rackspace_service_create_done";W3tc_Lightbox.load_form(c,".w3tc_cdn_rackspace_form",t)}).on("click",".w3tc_cdn_rackspace_protocol",function(){var t="";n("body").find(".w3tc_cdn_rackspace_protocol").each(function(c){jQuery(this).prop("checked")&&(t=n(this).val())}),n(".w3tc_cdn_rackspace_cname_http").css("display","http"==t?"":"none"),n(".w3tc_cdn_rackspace_cname_https").css("display","https"==t?"":"none")}).on("click",".w3tc_cdn_rackspace_configure_domains",function(){W3tc_Lightbox.open({id:"w3tc-overlay",close:"",width:1e3,height:400,url:ajaxurl+"?action=w3tc_ajax&_wpnonce="+w3tc_nonce+"&w3tc_action=cdn_rackspace_configure_domains",callback:function(c){e(c),w3tc_cdn_cnames_assign()}})}).on("click",".w3tc_cdn_rackspace_configure_domains_done",function(){var a=ajaxurl+"?action=w3tc_ajax&_wpnonce="+w3tc_nonce+"&w3tc_action=cdn_rackspace_configure_domains_done";n(".w3tc_cdn_rackspace_form").find("input").each(function(c){var t=n(this).attr("name");t&&(a+="&"+encodeURIComponent(t)+"="+encodeURIComponent(n(this).val()))});W3tc_Lightbox.load(a,function(c){e(c),w3tc_cdn_cnames_assign()})}).on("size_change","#cdn_cname_add",function(){e(W3tc_Lightbox)})});